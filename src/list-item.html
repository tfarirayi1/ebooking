<!--
@tfarirayi1
Shop list item
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/paper-styles/shadow.html">
<link rel="import" href="../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../bower_components/paper-slider/paper-slider.html">
<link rel="import" href="my-icons.html">


<link href="https://fonts.googleapis.com/css?family=Arvo|Raleway|Rhodium+Libre|Space+Mono|Cabin|Playfair+Display|Comfortaa" rel="stylesheet">

<dom-module id="list-item">
  <template>
    <style>
      :host {
        display: block;
        max-width: 300px;
        margin-top: 13px;
        margin-left: auto;
        margin-right: auto;
        color: #212121;
        border-radius: 8px 8px 1px 1px;
        background-color: #ECEFF1;
        @apply(--shadow-elevation-2dp);
      }

      .choose {
        @apply(--shadow-elevation-4dp);
      }

      .file {
      }

      .main {
        @apply(--layout-horizontal);
        @apply(--layout-center);        
      }

      paper-button.details {
        @apply(--layout-vertical);
        @apply(--layout-center);   
        padding-left: 5px;     
        text-transform: none;
      }

      paper-button.details:focus {
        text-decoration: none;
        font-weight: normal;
      }

      .title {
        font-size: 16px;
        font-family: 'Comfortaa', cursive;
        line-height: 140%;
      }

      .title:hover {
        /*text-decoration: underline;*/
      }

      .desc {
        font-family: 'Comfortaa', cursive;     
        font-size: 15px;  
        color: #ECEFF1;
        padding: 20px;
        text-align: center;
        line-height: 140%;
        margin: auto;
      }

      .price {
        font-size: 16px; 
        font-weight: 600;    
        letter-spacing: 1px;   
      }

      iron-icon.arrow {
        color: #424242;
      }

      .image {
        min-width: 60px;
        max-width: 60px;
        margin: auto;
        padding: 5px;
      }

      img.thumb {
        max-width: 100%;
        height: auto;
      }

      .collapse {
        padding: 13px;
        text-align: center;
        display: block;
      }
      
      iron-collapse {
        background-color:#37474F;
        display: block;
      }

      .size {
        margin: 8px 0px;
        /*width: 100%;*/
        text-align: left;
      }

      .indicator {
        text-align: left;
        text-transform: uppercase;
        font-size: 14px;
        letter-spacing: 1px;
        margin-top: 5px;
        padding: 3px 5px;
        border-radius: 0px 2px 2px 0px;
        color: #263238;
        color: #212121;
        background-color:#CFD8DC;
        font-family: 'Cabin', sans-serif;  
        width: fit-content;      
      }

      paper-radio-group.select-size {
        --paper-radio-group-item-padding: 5px;
        padding: 13px 13px;
        @apply(--layout-vertical);
        @apply(--layout-start);
      }

      paper-radio-button {
        font-family: 'Raleway', sans-serif;
        --paper-radio-button-size: 14px;
        --paper-radio-button-label-spacing: 5px;
        --paper-radio-button-checked-color: #FF8A65;
        --paper-radio-button-unchecked-color: #FF8A65;
        --paper-radio-button-unchecked-ink-color: #FF8A65;
        --paper-radio-button-checked-ink-color: #FF8A65;
        --paper-radio-button-label: {
          font-size: 13px;
          color: #ECEFF1;
          letter-spacing: 1px;
        }
      }

      .quantity {
        margin: 8px 0px; 
        text-align: left;   
        /*width: 100%;    */
      }

      paper-slider.select-quantity {
        --paper-slider-knob-start-color: #FF8A65;
        --paper-slider-knob-start-border-color: #FF8A65;
        --paper-slider-knob-color: #FF8A65;
        --paper-slider-active-color: #FF8A65;
        --paper-slider-container-color: #212121;
        --paper-slider-pin-color: #FF8A65;
        --paper-slider-font-color: #263238;
        margin-left: auto;
        margin-right: auto;
        margin-top: 8px;
      }

      .slider {
        @apply(--layout-vertical);
        @apply(--layout-center);
        @apply(--layout-center-justified);
      }

      .amount {
        color: #CFD8DC;
        font-family: 'Raleway', sans-serif;  
        font-size: 18px;
      }

      paper-button.basket {
        text-transform: uppercase;
        background-color: transparent;
        font-family: 'Cabin', sans-serif;  
        font-weight: lighter;
        letter-spacing: 1px;
        color: #CFD8DC;
        font-size: 14px;
        margin-top: 26px;
        text-align: center;
      }

      paper-button.basket:focus {
        text-decoration: none;
        font-weight: normal;
      }

      iron-icon.basket {
        --iron-icon-height: 20px;
        --iron-icon-width: 20px;
      }

      /* utilities */

      .spacer {
        @apply(--layout-flex);
      }

      u {
        text-decoration: none;
        border-bottom: 1px dotted #263238;
      }

      .sep-title {
        text-transform: uppercase;
        text-align: center;
        letter-spacing: 1px;
        font-size: 16px;
        color: #263238;
        margin-top: 1em;
        margin-bottom: 1em;
        font-family: 'Space Mono', monospace;
      }
    </style>
    <!-- Dom here -->
    <!-- Visible div -->
    <div class="main">
      <!-- Drop control button -->
      <paper-button class="details" on-click="toggle" noink>
        <span class="title">
          [[title]]
        </span>
        <span class="price">
          [[_formatPrice(price)]]
        </span>
        <iron-icon class="arrow" icon="{{arrow}}"></iron-icon>
      </paper-button>
      
        <span class="spacer"></span>      
      <!--<paper-icon-button icon="add-circle"></paper-icon-button>-->
      <div class="image">
        <img class="thumb" src="{{thumb}}">
      </div>
    </div>

    <!-- Drop div -->
    <iron-collapse id="collapse" opened="{{choose}}">
        <div class="desc">
          [[desc]]
        </div>

        <div class="sep-title">
        </div>

        <div class="size">
         <span class="indicator">Size</span>          
         <paper-radio-group class="select-size" selected="{{size}}">
            <paper-radio-button noink name="Small">SMALL</paper-radio-button>
            <paper-radio-button noink name="Medium">MEDIUM</paper-radio-button>
            <paper-radio-button noink name="Large">LARGE</paper-radio-button>
          </paper-radio-group>
        </div>

        <div class="quantity">
          <span class="indicator">Quantity</div>
          <div class="slider">
            <span class="amount">[[quantity]]</span>
            <paper-slider class="select-quantity" immediate-value="{{quantity}}" min="1" max="100"></paper-slider>
          </div>

        <paper-button on-click="_addToCart" class="basket">
          <iron-icon class="basket" icon="my-icons:add"></iron-icon>Add to basket
        </paper-button>
      </div>
    </iron-collapse>


  </template>

  <script>
    Polymer({

      is: 'list-item',

      properties: {

        item: {
          type: Object,
          computed: '_computeItem(title, thumb, price)',
          notify: true
        },
        
        choose: {
          type: Boolean,
          observer: '_chosen'
        },

        visible: Boolean,

        title: String,

        desc: String,

        price: String,

        thumb: String,

        quantity: {
          type: Number,
          value: 1
        },

        size: {
          type: String,
          value: 'small'
        },

        arrow: {
          type: String,
          value: 'my-icons:arrow-drop-down'
        },
        
        dropped: {
          type: Boolean,
          value: true,
          observer: '_arrow'
        }

      },

      _chosen: function(newValue, oldValue) {
        this.toggleClass('file', true);
        console.log(newValue);
      },

      _computeItem: function(title, thumb, price) {
        return {
          name: title,
          thumb: thumb,
          price: price
        };
      },

      toggle: function() {
          this.$.collapse.toggle();
          this.dropped = !this.dropped;
      },

      _arrow: function(newValue, oldValue) {
        if (newValue) this.arrow = 'my-icons:arrow-drop-down';
        if (!newValue) this.arrow = 'my-icons:arrow-drop-up';
      },

      _addToCart: function() {
        this.fire('add-basket-item', {
          item: this.item,
          quantity: parseInt(this.quantity, 10),
          size: this.size
        });
      },

      _clear: function() {
        this.fire('clear-basket', {
          item: this.item,
          quantity: parseInt(this.$.quantitySelect.value, 10),
          size: this.$.sizeSelect.value
        });
      },

      _formatPrice: function(price) {
        return price ? 'Â£' + price.toFixed(2) : '';
      }

    });
  </script>
</dom-module>
